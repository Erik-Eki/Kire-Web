---
import '../styles/global.scss'
import { SEO } from 'astro-seo'
import { ViewTransitions } from 'astro:transitions'
import { fade, slide } from 'astro:transitions'
import Header from '$components/main/Header.astro'
import Footer from '../components/main/Footer.astro'
// import { checkForState, checkForSession, fetchUserDetails, supabase } from '$lib/supabaseClient'
//import { profile } from '$components/stores/profile'
// let state = await checkForState(Astro.request)
// let user = fetchUserDetails()
// let session = checkForSession()
// Astro.cookies.set("state", state)
// Astro.cookies.set("user", user)
// Astro.cookies.set("session", session)

export interface Props {
	title: String
	// user: object;
}

const { title } = Astro.props as Props
// const { title, user } = Astro.props as Props;
// const isLoggedIn = !(user == null);
// console.log("LAYOUT:", user)

let counter: Number = 0

const cookie = Astro.cookies.get('counter')
if (cookie) {
	counter = cookie.number() + 1
}
Astro.cookies.set('counter', counter)

// twitter={{
// 				card: 'summary',
// 				site: '@wahlstra'
// 			}}
// 			extend={{
// 				meta: [
// 					{
// 						name: 'twitter:image',
// 						content: 'https://astro-supabase-vercel.vercel.app/preview.png'
// 					},
// 					{ name: 'twitter:title', content: 'Astro Supabase Vercel website' },
// 					{
// 						name: 'twitter:description',
// 						content:
// 							'App prototype built with Astro and Supabase authentication, deployed to Vercel'
// 					}
// 				]
// 			}}

// <body class="smooth-scroll flex flex-col prose max-w-6xl dark:prose-invert md:prose-lg lg:prose-xl">
---

<!DOCTYPE html>
<!-- <html lang="en" transition:animate={slide({ duration: '1s' })}> -->
<html lang="en" transition:animate={slide({ duration: '0.5s' })}>
	<!-- <html lang="en"> -->
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content="Astro description" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<!-- <script src="https://kit.fontawesome.com/747d59d837.js" crossorigin="anonymous"></script> -->
		<!-- <link rel="icon" type="image/svg+xml" href="/favicon.svg" /> -->
		<meta name="generator" content={Astro.generator} />
		<link rel="icon" type="image/jpg" href="/unnaafwafwfmed.jpg" />
		<script src="/htmx.min.js" is:inline></script>

		<ViewTransitions fallback="swap" />

		<title>{title}</title>
		<SEO
			title="Kire-web"
			description="Website built with Astro, Svelte, and Supabase, deployed to Vercel"
		/>
	</head>
	<body
		class="smooth-scroll prose flex max-w-none flex-col overflow-x-hidden dark:prose-invert md:prose-lg lg:prose-xl"
	>
		<div class="w-full">
			<div
				class="construction text-center text-2xl font-extrabold text-black">
				&#128679 UNDER HEAVY CONSTRUCTION BECAUSE WORKERS UNIONIZED &#128679
		</div>

			<Header />

			<main class="flex-1">
				<slot />
			</main>

			<h2 class="flex">
				Refresh counter test =
				<div
					class="bg-gradient-to-tr from-indigo-500 from-10% via-sky-500 via-30% to-emerald-500 to-90% bg-clip-text font-extrabold text-transparent"
				>
					{counter}
				</div>
			</h2>

			<Footer />
			<style>
				.smooth-scroll {
					scroll-behavior: smooth;
				}
			</style>
		</div>
	</body>
</html>
